# AGENTS.md 窶・phits-linac-validation

縺薙・繝輔ぃ繧､繝ｫ縺ｯ縲√お繝ｼ繧ｸ繧ｧ繝ｳ繝茨ｼ医♀繧医・蟆・擂縺ｮ髢狗匱閠・ｼ峨′譛ｬ繝ｪ繝昴ず繝医Μ蜀・〒菴懈･ｭ縺吶ｋ髫帙・邏・據莠九→謇矩・ｒ縺ｾ縺ｨ繧√◆繧ゅ・縺ｧ縺吶よ悽繝輔ぃ繧､繝ｫ縺ｮ繧ｹ繧ｳ繝ｼ繝励・繝ｪ繝昴ず繝医Μ繝ｫ繝ｼ繝磯・荳九・蜈ｨ繝・ぅ繝ｬ繧ｯ繝医Μ縺ｧ縺吶・
## 逶ｮ逧・→讎りｦ・- 譛ｬ繝励Ο繧ｸ繧ｧ繧ｯ繝医・縲￣HITS 蜃ｺ蜉幢ｼ・.out`・峨→螳滓ｸｬ CSV 繧定ｪｭ縺ｿ霎ｼ縺ｿ縲∫ｷ夐㍼繝励Ο繝輔ぃ繧､繝ｫ縺ｮ豈碑ｼ・・隧穂ｾ｡・医ぎ繝ｳ繝槭う繝ｳ繝・ャ繧ｯ繧ｹ縲ヽMSE・峨ｒ陦後＞縺ｾ縺吶・- 荳ｻ繧ｹ繧ｯ繝ｪ繝励ヨ: `src/Comp_measured_phits_v9.1.py`
- 險ｭ螳・ `config.ini`・医ヱ繧ｹ鬘槭・縺薙％縺ｧ邂｡逅・ｼ・- 萓九ョ繝ｼ繧ｿ: `data/measured_csv/`, `data/phits_output/`
- 蜃ｺ蜉・ `output/plots/`・亥峙・峨→ `output/reports/`・医Ξ繝昴・繝茨ｼ・
## 螳溯｡鯉ｼ医Ο繝ｼ繧ｫ繝ｫ・・- 萓晏ｭ倬未菫ゑｼ域怙菴朱剞・・ `python>=3.9`, `pandas`, `numpy`, `matplotlib`, `scipy`, `pymedphys`
- 莉ｮ諠ｳ迺ｰ蠅・ｒ謗ｨ螂ｨ・・indows 萓具ｼ・
  - `python -m venv .venv`
  - `.venv\Scripts\activate`
  - `pip install -U pip` 縺ｮ蠕後∝ｿ・ｦ√ヱ繝・こ繝ｼ繧ｸ繧偵う繝ｳ繧ｹ繝医・繝ｫ
- 螳溯｡御ｾ・
  - `python src/Comp_measured_phits_v9.1.py data/phits_output/deposit-z-water.out data/measured_csv/10x10mPDD-zZver.csv --scale 1.02 --dd 2.0 --dta 2.0`
- 蠑墓焚繧堤怐逡･縺吶ｋ縺ｨ蟇ｾ隧ｱ繝｢繝ｼ繝会ｼ・config.ini` 縺ｮ繝・ぅ繝ｬ繧ｯ繝医Μ縺九ｉ繝輔ぃ繧､繝ｫ驕ｸ謚橸ｼ・
## 險ｭ螳夲ｼ・onfig.ini・・- 繧ｻ繧ｯ繧ｷ繝ｧ繝ｳ `[Paths]` 縺ｫ莉･荳九く繝ｼ繧貞ｮ夂ｾｩ:
  - `phits_data_dir`  窶ｦ PHITS `.out` 縺ｮ譬ｼ邏阪ョ繧｣繝ｬ繧ｯ繝医Μ
  - `measured_data_dir` 窶ｦ 螳滓ｸｬ `.csv` 縺ｮ譬ｼ邏阪ョ繧｣繝ｬ繧ｯ繝医Μ
  - `output_dir` 窶ｦ 蝗ｳ縺ｨ繝ｬ繝昴・繝医・蜃ｺ蜉帛・
- 繧ｹ繧ｯ繝ｪ繝励ヨ縺ｯ閾ｪ霄ｫ縺ｮ蝣ｴ謇縺九ｉ繝励Ο繧ｸ繧ｧ繧ｯ繝医Ν繝ｼ繝医ｒ邂怜・縺励～config.ini` 繧定ｪｭ縺ｿ霎ｼ繧薙□荳翫〒逶ｸ蟇ｾ隗｣豎ｺ繧定ｩｦ縺ｿ縺ｾ縺吶ら腸蠅・↓萓晏ｭ倥☆繧狗ｵｶ蟇ｾ繝代せ縺ｯ `config.ini` 縺ｮ縺ｿ縺ｧ邂｡逅・＠縲√た繝ｼ繧ｹ蜀・↓繝上・繝峨さ繝ｼ繝峨＠縺ｪ縺・％縺ｨ縲・
- 繧ｻ繧ｯ繧ｷ繝ｧ繝ｳ `[Processing]`・井ｻｻ諢擾ｼ・
  - `resample_grid_cm` 窶ｦ RMSE/蜿ｯ隕門喧縺ｮ縺溘ａ蜈ｱ騾壹げ繝ｪ繝・ラ縺ｸ蜀阪し繝ｳ繝励Ν縺吶ｋ髫帙・蛻ｻ縺ｿ・・m・峨よ里螳壹・ 0.1・亥ｰ・擂CLI縺ｧ縺ｮ荳頑嶌縺榊ｯｾ蠢應ｺ亥ｮ夲ｼ峨・
## 繝・・繧ｿ莉墓ｧ・- 螳滓ｸｬ CSV:
  - 蜈磯ｭ縺ｫ `X (cm)` / `Y (cm)` / `Z (cm)` 縺ｨ縺・▲縺溯ｻｸ繝倥ャ繝繧貞性繧蠖｢蠑上ｒ諠ｳ螳夲ｼ亥､ｧ譁・ｭ怜ｰ乗枚蟄励・髱樔ｾ晏ｭ假ｼ峨・  - 2 蛻暦ｼ亥ｺｧ讓・ 邱夐㍼・峨ｒ隱ｭ縺ｿ霎ｼ縺ｿ縲∫ｷ夐㍼縺ｯ譛螟ｧ蛟､縺ｧ 100% 豁｣隕丞喧縺励※豈碑ｼ・・- PHITS `.out`:
  - `[ T-Deposit ]`・郁｡ｨ險俶昭繧悟性繧・峨・譛邨ゅそ繧ｯ繧ｷ繝ｧ繝ｳ繧呈歓蜃ｺ縺励～nx/ny/nz` 縺九ｉ繝励Ο繝輔ぃ繧､繝ｫ霆ｸ繧貞酔螳夲ｼ・x`/`y`/`z`・峨・  - 隗｣譫舌・ mm 蜊倅ｽ榊燕謠舌ょｿ・ｦ√↓蠢懊§縺ｦ螟画鋤繝ｭ繧ｸ繝・け繧定ｿｽ蜉縺吶ｋ蝣ｴ蜷医・ README 縺ｨ譛ｬ繝輔ぃ繧､繝ｫ繧呈峩譁ｰ縲・
## 蜃ｺ蜉・- 蝗ｳ: `output/plots/Comp_... .png`
- 繝ｬ繝昴・繝・ `output/reports/Report_... .txt`
- 縺薙ｌ繧峨・ `.gitignore` 貂医∩縲よ・譫懃黄縺ｯ繧ｳ繝溘ャ繝医＠縺ｪ縺・・
## 繧ｳ繝ｼ繝・ぅ繝ｳ繧ｰ隕冗ｴ・ｼ・rc 驟堺ｸ具ｼ・- 繧ｹ繧ｿ繧､繝ｫ: 譌｢蟄倥さ繝ｼ繝峨↓蜷医ｏ縺帙◆繧ｷ繝ｳ繝励Ν縺ｪ髢｢謨ｰ蛻・牡縺ｨ PEP 8 繝吶・繧ｹ縲・- 譁・ｭ励さ繝ｼ繝・ `UTF-8`・郁ｪｭ縺ｿ霎ｼ縺ｿ縺ｫ縺ｯ `utf-8-sig` 繧貞━蜈医☆繧九→ BOM 豺ｷ蝨ｨ縺ｫ鬆大▼・峨・- 萓句､・繝｡繝・そ繝ｼ繧ｸ: 迴ｾ迥ｶ縺ｫ蛟｣縺・律譛ｬ隱槭Γ繝・そ繝ｼ繧ｸ縺ｧ `stderr` 繧呈ｴｻ逕ｨ縲・- CLI 莠呈鋤諤ｧ: 譌｢蟄伜ｼ墓焚・・--scale`, `--window`, `--order`, `--dd`, `--dta`, 縺ｻ縺具ｼ峨ｒ螢翫＆縺ｪ縺・りｿｽ蜉譎ゅ・繝・ヵ繧ｩ繝ｫ繝井ｺ呈鋤繧貞ｮ医ｋ縲・- 繝舌・繧ｸ繝ｧ繝ｳ: `__version__` 繧呈峩譁ｰ縺吶ｋ蝣ｴ蜷医・ README 縺ｮ譖ｴ譁ｰ螻･豁ｴ縺ｫ繧りｿｽ險倥・
## 螟画峩譁ｹ驥・- 逶ｮ逧・､悶・螟ｧ隕乗ｨ｡繝ｪ繝輔ぃ繧ｯ繧ｿ縺ｯ驕ｿ縺代∵ｩ溯・霑ｽ蜉/荳榊・蜷井ｿｮ豁｣縺ｯ譛蟆丞ｷｮ蛻・〒縲・- 繝代せ繧・里螳壼虚菴懊↓髢｢繧上ｋ螟画峩縺ｯ `README.md` 縺ｨ譛ｬ繝輔ぃ繧､繝ｫ繧貞酔譎よ峩譁ｰ縲・- `data/` 縺ｯ繧ｵ繝ｳ繝励Ν蜿ら・逕ｨ縲らｴ螢顔噪螟画峩・井ｸ頑嶌縺阪ｄ蜑企勁・峨・陦後ｏ縺ｪ縺・・- 隗｣譫舌Ο繧ｸ繝・け・医ぎ繝ｳ繝櫁ｩ穂ｾ｡繝ｻRMSE・峨ｒ螟画峩縺吶ｋ蝣ｴ蜷医・縲∵ｹ諡繝ｻ繝代Λ繝｡繝ｼ繧ｿ繧偵Ξ繝昴・繝医↓譖ｸ縺榊・縺吶ｈ縺・粋繧上○縺ｦ螳溯｣・・
## 萓晏ｭ倥Λ繧､繝悶Λ繝ｪ邂｡逅・- 譛ｬ繝ｪ繝昴ず繝医Μ縺ｯ繝ｭ繝・け繝輔ぃ繧､繝ｫ繧呈戟縺｡縺ｾ縺帙ｓ縲る幕逋ｺ閠・・繝ｭ繝ｼ繧ｫ繝ｫ迺ｰ蠅・〒蜷・・繧､繝ｳ繧ｹ繝医・繝ｫ縺励※縺上□縺輔＞縲・- 蜿り・う繝ｳ繧ｹ繝医・繝ｫ繧ｳ繝槭Φ繝・
  - `pip install pandas numpy matplotlib scipy pymedphys`
- 繝阪ャ繝医Ρ繝ｼ繧ｯ蛻ｶ髯蝉ｸ九・ CI/繧ｨ繝ｼ繧ｸ繧ｧ繝ｳ繝育腸蠅・〒縺ｯ繧､繝ｳ繧ｹ繝医・繝ｫ繧定ｩｦ縺ｿ縺ｪ縺・％縺ｨ・亥ｿ・ｦ√〒縺ゅｌ縺ｰ謇矩・・縺ｿ謠千､ｺ・峨・
## 繧医￥縺ゅｋ關ｽ縺ｨ縺礼ｩｴ縺ｨ謖・・
- 譁・ｭ怜喧縺・ Windows 逕ｱ譚･縺ｮ CSV / INI 縺ｯ BOM 莉倥″ `utf-8-sig` 隱ｭ縺ｿ繧貞━蜈医・- 謾ｹ陦後さ繝ｼ繝・ 譌｢蟄倥ヵ繧｡繧､繝ｫ縺ｮ謾ｹ陦後↓蜷医ｏ縺帙ｋ・・indows 迺ｰ蠅・〒縺ｯ CRLF・峨・- 邨ｶ蟇ｾ繝代せ: 繧ｽ繝ｼ繧ｹ縺ｫ逶ｴ譖ｸ縺阪＠縺ｪ縺・Ａconfig.ini` 縺ｫ髮・ｴ・＠縲√せ繧ｯ繝ｪ繝励ヨ蛛ｴ縺ｯ逶ｸ蟇ｾ隗｣豎ｺ繧定ｩｦ縺ｿ繧九・- 蜃ｺ蜉帛・: 蟄伜惠縺励↑縺・ｴ蜷医・菴懈・縺吶ｋ螳溯｣・婿驥昴ｒ邯ｭ謖√・
## 繧ｨ繝ｼ繧ｸ繧ｧ繝ｳ繝亥髄縺代Ν繝ｼ繝ｫ・亥ｿ・ｪｭ・・- 縺薙・ AGENTS.md 縺ｮ遽・峇縺ｯ繝ｪ繝昴ず繝医Μ蜈ｨ菴薙ゅ％縺薙↓蜿阪☆繧狗ｷｨ髮・・陦後ｏ縺ｪ縺・％縺ｨ縲・- 繝輔ぃ繧､繝ｫ螟画峩譎ゅ・縲∫岼逧・・菫ｮ豁｣縺ｫ蠢・ｦ√↑譛蟆城剞縺ｫ逡吶ａ繧九・- 譌｢蟄倥・ I/O 莉墓ｧ假ｼ医ヵ繧｡繧､繝ｫ蜷阪∝ｼ墓焚縲∝・蜉帛・・峨ｒ邯ｭ謖√ょ､画峩縺悟ｿ・ｦ√↑蝣ｴ蜷医・ README 縺ｨ譛ｬ繝輔ぃ繧､繝ｫ繧呈峩譁ｰ縲・- 螟ｧ隕乗ｨ｡縺ｪ險ｭ險亥､画峩繝ｻ螟夜Κ萓晏ｭ倥・霑ｽ蜉縺ｯ縲√∪縺壽署譯医ｒ縺ｾ縺ｨ繧√※縺九ｉ陦後≧・亥叉譎ょ渚譏縺励↑縺・ｼ峨・
## 蜿ら・
- 繧ｨ繝ｳ繝医Μ繝昴う繝ｳ繝・ `src/Comp_measured_phits_v9.1.py`
- 險ｭ螳・ `config.ini`
- 繧ｵ繝ｳ繝励Ν繝・・繧ｿ: `data/measured_csv/`, `data/phits_output/`
- 辟｡隕冶ｨｭ螳・ `.gitignore`・・output/`, `.venv/` 縺ｪ縺ｩ・・
